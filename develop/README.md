# Документация для разработчиков

Этот README служит точкой входа для всей информации, необходимой разработчикам.

## Руководства по разработке

### Основные документы
1. **[Архитектура сценариев](architecture-guide.md)** - подробное описание базовой архитектуры ScenarioBase, обязательных и необязательных методов, жизненного цикла сценариев
2. **[Процесс разработки сценария](development-process.md)** - пошаговое руководство по созданию новых сценариев с примерами кода и различными подходами к разработке
3. **[Пример добавления сценария](example-add-new-scenario.md)** - практический пример создания конкретного сценария с детальными инструкциями

### Дополнительная информация
4. **[Описание используемого стиля и окружения](environment-guide.md)** - настройка среды разработки, линтеры, форматтеры
5. **[Варианты установки и сборки сценариев](install-variants-and-build-pkg.md)** - различные способы установки и развертывания

## Что такое сценарии WB

Сценарии являются методом упрощения конфигурирования контроллера WB. Они позволяют настраивать работу частых use-case через графический интерфейс без необходимости изучения написания скриптов.

### Компоненты сценария

1. **JSON схема** (`wb-scenarios.schema.json`) - описание веб-интерфейса для json-editor
2. **Конфигурация** (`*.conf`) - сохраненные настройки сценария из веб-интерфейса

Файл конфигурации содержит массив "scenarios", где каждый элемент\
является полностью описанным отдельным сценарием. Тип сценария определяется\
полем "scenarioType".

```json
{
    "configVersion": 1,
    "scenarios": [
        {
            "componentVersion": 1,
            "enable": true,
            "name": "Расписание",
            "outControls": [
                {
                    "actionValue": 0,
                    "behaviorType": "setEnable",
                    "control": "buzzer/enabled"
                }
            ],
            "scenarioType": "schedule",
            "scheduleDaysOfWeek": [
                "tuesday"
            ],
            "scheduleTime": "14:02"
        }
    ]
}
```

3. **Модуль сценария** (`*.mod.js`) - класс, наследующий от ScenarioBase с бизнес-логикой
4. **Модуль инициализации** (`scenario-init-*.mod.js`) - точка входа для инициализации сценариев

## Быстрый старт

1. **Изучите архитектуру**: начните с [architecture-guide.md](architecture-guide.md)
2. **Выберите подход**: ознакомьтесь с [development-process.md](development-process.md) 
3. **Следуйте примеру**: используйте [example-add-new-scenario.md](example-add-new-scenario.md) как шаблон
4. **Настройте окружение**: см. [environment-guide.md](environment-guide.md)

## Структура файлов сценария

```
scenarios/your-scenario-name/           # Папка сценария (kebab-case)
├── your-scenario.mod.js                # Основной модуль сценария  
├── scenario-init-your-scenario.mod.js  # Модуль инициализации
└── README.md                           # Документация сценария
```

## Основные принципы

- **Наследование от ScenarioBase** - обязательно для всех сценариев
- **Единая архитектура** - следование установленным паттернам
- **Валидация конфигурации** - проверка входных данных
- **Управление состояниями** - контроль жизненного цикла сценария


